<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<div
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:t="http://myfaces.apache.org/tomahawk"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:iwc="http://xmlns.idega.com/com.idega.core"
>
	<t:div styleClass="#{casesBPMAssetsState.gridStyleClasses}">
		<t:div style="display: none;" styleClass="processInstanceIdValueHolderContainer">
			<input type="hidden" class="processInstanceIdValueHolder" value="#{casesBPMAssetsState.processInstanceId}" />
			<input type="hidden" name="showBackButton" value="#{casesBPMAssetsState.showBackButton}" />
		</t:div>
		<t:div styleClass="sendCaseEmailStyleInBPMCaseViewer" rendered="#{casesBPMAssetsState.renderCaseEmailContainer}" style="display: none;">
			<a href="#{casesBPMAssetsState.caseEmailSubject}" title="#{casesBPMAssetsState.sendEmailTitle}">
				<t:outputText styleClass="sendCaseEmailTextStyleInBPMCaseViewer" value="#{casesBPMAssetsState.sendEmailTitle}">
					<img src="#{casesBPMAssetsState.sendEmailImage}" />
				</t:outputText>
			</a>
		</t:div>
		<t:div styleClass="caseStatePart #{casesBPMAssetsState.tasksVisibilityProperty}"  rendered="#{not empty casesBPMAssetsState.stateTable}">
			<t:div styleClass="header">
				<t:div styleClass="caseStatePartHeaderLeftLayerStyle" style="float: left">
					<t:outputText value="#{localizedStrings['is.idega.idegaweb.egov.bpm']['states']}"/>
				</t:div>
				<t:div styleClass="caseStatePartHeaderRightLayerStyle" rendered="#{loginSession.loggedIn and caseManagerState.fullView}" style="float: right">
					
					
				</t:div>
				<div class="spacer" />
				<t:div style="display: none;" rendered="#{casesBPMAssetsState.currentBPMUser.isAssociated}" />
			</t:div>
			<div style="display:none"><iwc:datePicker version="1.8.17" dateRange="false" showCalendarImage="false" style="display:none;float:right;border: 0;text-align: center;line-height: 1.2em;margin: 1em 0;width: 100%;"></iwc:datePicker></div>
			<table class="caseState" border="0">
			<thead>
			<tr>
				<t:dataList value="#{casesBPMAssetsState.stateTable}" var="colData" rowCountVar="count" rowIndexVar="index">
					<ui:fragment rendered="#{index == 0}">
						<th class="state">#{localizedStrings['is.idega.idegaweb.egov.bpm'][colData.stateDefinition.stateLocalizationKey]}</th>
					</ui:fragment>
					<ui:fragment rendered="#{index == 1}">
						<th class="state">#{localizedStrings['is.idega.idegaweb.egov.bpm'][colData.stateDefinition.stateLocalizationKey]} hefst</th>
						<th class="state-separator"></th>
						<th class="state">#{localizedStrings['is.idega.idegaweb.egov.bpm'][colData.stateDefinition.stateLocalizationKey]} lokið</th>
					</ui:fragment>
					<ui:fragment rendered="#{index == 2}">
						<th class="state">#{localizedStrings['is.idega.idegaweb.egov.bpm'][colData.stateDefinition.stateLocalizationKey]}</th>
					</ui:fragment>
					<ui:fragment rendered="#{index + 1 != count}">
					 	<th class="state-separator"></th>
					</ui:fragment>
				</t:dataList>
			</tr>
			</thead>
			<tbody>
			<tr>
				<t:dataList value="#{casesBPMAssetsState.stateTable}" var="colData" rowCountVar="count" rowIndexVar="index">
						<ui:fragment rendered="#{index == 0}">
							<td>#{colData.stateInstance.stateEndDate}</td>
						</ui:fragment>
						<ui:fragment rendered="#{index == 1}">
							<td>#{colData.stateInstance.stateExpectedEndDate}</td>
							<td class="state-separator"></td>
							<td>#{colData.stateInstance.stateEndDate}</td>
						</ui:fragment>
						<ui:fragment rendered="#{index == 2}">
							<ui:fragment rendered="#{casesBPMAssetsState.stateTable[1].stateInstance.stateEndDate == null and colData.stateInstance.stateEndDate == null}">
								<td></td>
							</ui:fragment>
							<ui:fragment rendered="#{casesBPMAssetsState.stateTable[1].stateInstance.stateEndDate != null and colData.stateInstance.stateEndDate == null}">
								<td>#{casesBPMAssetsState.stateTable[1].stateInstance.stateEndDate90} áætlun</td>
							</ui:fragment>
							<ui:fragment rendered="#{colData.stateInstance.stateEndDate != null}">
								<td>#{colData.stateInstance.stateEndDate}</td>
							</ui:fragment>
						</ui:fragment>
					<ui:fragment rendered="#{index + 1 != count}">
					 	<td class="state-separator"></td>
					 </ui:fragment>
				</t:dataList>
			</tr>
			</tbody>
			</table>
		</t:div>
		<t:div styleClass="caseTasksPart #{casesBPMAssetsState.tasksVisibilityProperty}" style="display: none;">
			<t:div styleClass="header">
				<t:div styleClass="caseTasksPartHeaderLeftLayerStyle" style="float: left">
					<t:outputText value="#{localizedStrings['is.idega.idegaweb.egov.bpm']['tasks']}"/>
				</t:div>
				<t:div styleClass="caseTasksPartHeaderRightLayerStyle" rendered="#{loginSession.loggedIn and caseManagerState.fullView}" style="float: right">
					<t:outputText styleClass="watchUnwatchCase" value="#{casesBPMAssetsState.watchCaseStatusLabel}"></t:outputText>
					<t:outputText styleClass="selectCaseHandlerLabelStyle" style="display: none;" value="#{localizedStrings['is.idega.idegaweb.egov.bpm']['bpm.caseHandler']}:" />
					<h:selectOneListbox styleClass="takeCaseSelect" style="margin-left: 10px; display: none;" />
					<t:graphicImage url="#{iwResourceResolver['is.idega.idegaweb.egov.bpm']['images/reload.png']}"
						title="#{localizedStrings['is.idega.idegaweb.egov.bpm']['reload']}" alt="#{localizedStrings['is.idega.idegaweb.egov.bpm']['reload']}"
						styleClass="reloadCaseStyleClass" />
						
					<t:graphicImage rendered="#{casesBPMAssetsState.showLogExportButton}" url="#{iwResourceResolver['is.idega.idegaweb.egov.bpm']['images/export_case_logs.png']}"
						title="#{localizedStrings['is.idega.idegaweb.egov.bpm']['download_case_logs_as_pdf']}" alt="#{localizedStrings['is.idega.idegaweb.egov.bpm']['download_case_logs_as_pdf']}"
						styleClass="caseLogsAsPDFStyleClass"/>
					
				</t:div>
				<div class="spacer" />
				<t:div style="display: none;" rendered="#{casesBPMAssetsState.currentBPMUser.isAssociated}" />
			</t:div>
			<table class="caseTasks" border="0" />
		</t:div>
		<t:div styleClass="caseFormsPart caseListTasksSectionVisibleStyleClass" style="display: none;">
			<t:div styleClass="header"><t:outputText value="#{localizedStrings['is.idega.idegaweb.egov.bpm']['forms']}"/></t:div>
			<table class="caseForms" border="0" />
		</t:div>
		<t:div styleClass="caseEmailsPart caseListTasksSectionVisibleStyleClass" style="display: none;">
			<t:div styleClass="header"><t:outputText value="#{localizedStrings['is.idega.idegaweb.egov.bpm']['emails']}"/></t:div>
			<table class="caseEmails" border="0" />
		</t:div>
		<t:div styleClass="caseContactsPart caseListTasksSectionVisibleStyleClass" style="display: none;">
			<t:div styleClass="header">
				<t:outputText value="#{localizedStrings['is.idega.idegaweb.egov.bpm']['contacts']}"/>
				<h:panelGroup rendered="#{casesBPMAssetsState.addExportContacts}" styleClass="case-header-actions">
					<a href="#{casesBPMAssetsState.exportUsersUrl}" class="XLS">#{localizedStrings['is.idega.idegaweb.egov.bpm']['export']}</a>
				</h:panelGroup>
			</t:div>
			<table class="caseContacts" border="0" />
		</t:div>
	</t:div>
	
	<t:div styleClass="caseViewBackButtonStyle" rendered="#{casesBPMAssetsState.showBackButton}">
		<input type="button" value="#{localizedStrings['is.idega.idegaweb.egov.bpm']['back']}" onclick="history.back();" />
	</t:div>
</div>