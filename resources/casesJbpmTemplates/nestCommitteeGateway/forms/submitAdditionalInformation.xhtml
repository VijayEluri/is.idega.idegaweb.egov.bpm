<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xf="http://www.w3.org/2002/xforms"
      xmlns:xs="http://www.w3.org/2001/XMLSchema"
      xmlns:ev="http://www.w3.org/2001/xml-events">
    <head>
        <title>
         <xf:output model="data_model"
                    ref="instance('localized_strings')/form.title[@lang=instance('localized_strings')/current_language]"/>
      </title>

        <xf:model id="submission_model" schema="#fb-schema">
            <xf:instance xmlns="" id="data-instance">
                <data>
                    <form_id>tmplid</form_id>
                <bind.fbc_5 mapping="string:additionalInformationRequestText"/>
               <Additional_info_fbc_6 mapping="string:additionalInformation"/>
               <Add_One_fbc_8 mapping="files:additionalAttachments">
                           <entry filename="" mediatype=""/>
                           <entry filename="" mediatype=""/>
               </Add_One_fbc_8>
            </data>
            </xf:instance>            
            <xf:submission action="xformsBPM:/nouri" id="submit_data_submission" method="post"
                        replace="none"/>
        <xf:bind id="bind.fbc_5" nodeset="bind.fbc_5"/>
         <xf:bind id="bind.fbc_6" nodeset="Additional_info_fbc_6" required="true()" type="string"/>
         <xf:bind id="bind.fbc_8" nodeset="Add_One_fbc_8/entry[position() != last()]"
                  type="anyURI"/>
      </xf:model>
        <xf:model id="data_model">
            <xf:instance xmlns="" id="localized_strings">
                  <localized_strings>
                        <default_language>en</default_language>
                       <current_language>en</current_language>
                       <form.title lang="en">Submit additional information</form.title>
                       <page-1.label lang="en">First section</page-1.label>
                       <page-2.label lang="en">Submitted</page-2.label>
                       <page-1-submit.label lang="en">Submit</page-1-submit.label>
                       <page-2.info lang="en">Form submitted, thank You!</page-2.info>
                    <fbc_5.text lang="en"></fbc_5.text>
               <fbc_5.label lang="en">Information request</fbc_5.label>
               <fbc_6.title lang="is">Paragraph text input</fbc_6.title>
               <fbc_6.title lang="en">Additional info</fbc_6.title>
               <fbc_8.label lang="is">Add One</fbc_8.label>
               <fbc_8.label lang="en">Add One</fbc_8.label>
               <fbc_8.remove lang="is">Remove</fbc_8.remove>
               <fbc_8.remove lang="en">Remove</fbc_8.remove>
            </localized_strings>
            </xf:instance>
          </xf:model>
        <xs:schema id="fb-schema">
        </xs:schema>
    </head>
    <body>
        <xf:group appearance="full">
            <xf:switch>
                  <xf:case id="fbc_1">
                        <xf:group appearance="full">
                            <xf:label model="data_model"
                            ref="instance('localized_strings')/page-1.label[@lang=instance('localized_strings')/current_language]"/>
                            <div class="fbc_simple_text" id="fbc_5" name="fbc_simple_text">
                     <xf:output model="data_model"
                                ref="instance('localized_strings')/fbc_5.text[@lang=instance('localized_strings')/current_language]"/>
                     <xf:output bind="bind.fbc_5">
                        <xf:label model="data_model"
                                  ref="instance('localized_strings')/fbc_5.label[@lang=instance('localized_strings')/current_language]"/>
                     </xf:output>
                  </div>
                  <xf:textarea bind="bind.fbc_6" id="fbc_6">
                     <xf:label model="data_model"
                               ref="instance('localized_strings')/fbc_6.title[@lang=instance('localized_strings')/current_language]"/>
                  </xf:textarea>
                  <xf:group appearance="full" bind="bind.fbc_8" id="fbc_8" name="fbc_multi_upload_file">
                     <xf:trigger>
                        <xf:label model="data_model"
                                  ref="instance('localized_strings')/fbc_8.label[@lang=instance('localized_strings')/current_language]"/>
                        <xf:action>
                           <xf:insert at="last()" nodeset="instance('data-instance')/Add_One_fbc_8/entry"
                                      position="before"/>
                        </xf:action>
                     </xf:trigger>
                     <xf:repeat appearance="full" bind="bind.fbc_8" id="upload_entries_fbc_8">
                        <xf:upload ref=".">
                           <xf:filename ref="@filename"/>
                           <xf:mediatype ref="@mediatype"/>
                        </xf:upload>
                        <xf:trigger>
                           <xf:label model="data_model"
                                     ref="instance('localized_strings')/fbc_8.remove[@lang=instance('localized_strings')/current_language]"/>
                           <xf:action>
                              <xf:delete at="index('upload_entries_fbc_8')"
                                         nodeset="instance('data-instance')/Add_One_fbc_8/entry"/>
                           </xf:action>
                        </xf:trigger>
                     </xf:repeat>
                  </xf:group>
                  <div class="fbc_button_area" id="fbc_2" name="fbc_button_area">
                                  <xf:trigger class="fbc_button_submit" id="fbc_3" name="fbc_button_submit">
                                        <xf:label model="data_model"
                                  ref="instance('localized_strings')/page-1-submit.label[@lang=instance('localized_strings')/current_language]"/>
                                        <xf:send submission="submit_data_submission"/>
                            <xf:toggle case="fbc_4" ev:event="DOMActivate"/>
                        </xf:trigger>
                            </div>
                        </xf:group>
                  </xf:case>
                  <xf:case id="fbc_4" name="thx_page">
                        <xf:group appearance="full">
                            <xf:label model="data_model"
                            ref="instance('localized_strings')/page-2.label[@lang=instance('localized_strings')/current_language]"/>
                            <xf:output model="data_model"
                             ref="instance('localized_strings')/page-2.info[@lang=instance('localized_strings')/current_language]"/>
                        </xf:group>
                  </xf:case>
            </xf:switch>
        </xf:group>
    </body>
</html>